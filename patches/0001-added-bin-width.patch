From b0fced17af87a2886310582c1b1b9d80ec25afc7 Mon Sep 17 00:00:00 2001
From: Joosep Pata <joosep.pata@gmail.com>
Date: Thu, 27 Feb 2014 15:41:54 +0200
Subject: [PATCH] added bin width

---
 gen/tdirectory.cc | 2 +-
 gen/tfile.cc      | 2 +-
 gen/th1.cc        | 3 +++
 gen/th1.jl        | 1 +
 src/ROOT.jl       | 2 +-
 src/wrap_root.jl  | 7 ++++++-
 6 files changed, 13 insertions(+), 4 deletions(-)

diff --git a/gen/tdirectory.cc b/gen/tdirectory.cc
index cfc48c9..6bf36a2 100644
--- a/gen/tdirectory.cc
+++ b/gen/tdirectory.cc
@@ -8,7 +8,7 @@ TDirectory* TDirectory_TDirectory2(char* name, char* title, Option_t* option, TD
   return new TDirectory(name, title, option, motherDir);
 }
 void TDirectory_Close1(TDirectory* __obj, Option_t* option) {
-  __obj->Close(option);
+  return __obj->Close(option);
 }
 TObject* TDirectory_Get1(TDirectory* __obj, char* namecycle) {
   return __obj->Get(namecycle);
diff --git a/gen/tfile.cc b/gen/tfile.cc
index 0b8f308..1273680 100644
--- a/gen/tfile.cc
+++ b/gen/tfile.cc
@@ -8,7 +8,7 @@ TFile* TFile_TFile2(char* fname, Option_t* option, char* ftitle, Int_t compress)
   return new TFile(fname, option, ftitle, compress);
 }
 void TFile_Close1(TFile* __obj, Option_t* option) {
-  __obj->Close(option);
+  return __obj->Close(option);
 }
 Int_t TFile_Write1(TFile* __obj, char* name, Int_t opt, Int_t bufsiz) {
   return __obj->Write(name, opt, bufsiz);
diff --git a/gen/th1.cc b/gen/th1.cc
index 3b71eaa..37dc3b3 100644
--- a/gen/th1.cc
+++ b/gen/th1.cc
@@ -31,6 +31,9 @@ Double_t TH1_GetBinError3(TH1* __obj, Int_t binx, Int_t biny, Int_t binz) {
 Double_t TH1_GetBinLowEdge1(TH1* __obj, Int_t bin) {
   return __obj->GetBinLowEdge(bin);
 }
+Double_t TH1_GetBinWidth1(TH1* __obj, Int_t bin) {
+  return __obj->GetBinWidth(bin);
+}
 Double_t TH1_GetEntries1(TH1* __obj ) {
   return __obj->GetEntries();
 }
diff --git a/gen/th1.jl b/gen/th1.jl
index ade3003..8e1d129 100644
--- a/gen/th1.jl
+++ b/gen/th1.jl
@@ -8,6 +8,7 @@
 @method :libroot TH1 GetBinError Double_t (binx::Int_t, biny::Int_t, ) GetBinError2 (nothing, nothing,  )
 @method :libroot TH1 GetBinError Double_t (binx::Int_t, biny::Int_t, binz::Int_t, ) GetBinError3 (nothing, nothing, nothing,  )
 @method :libroot TH1 GetBinLowEdge Double_t (bin::Int_t, ) GetBinLowEdge1 (nothing,  )
+@method :libroot TH1 GetBinWidth Double_t (bin::Int_t, ) GetBinWidth1 (nothing,  )
 @method :libroot TH1 GetEntries Double_t () GetEntries1 ( )
 @method :libroot TH1 GetNbinsX Int_t () GetNbinsX1 ( )
 @method :libroot TH1 Integral Double_t (option::Ptr{Option_t}, ) Integral1 ("",  )
diff --git a/src/ROOT.jl b/src/ROOT.jl
index 1927505..b1ab0f3 100644
--- a/src/ROOT.jl
+++ b/src/ROOT.jl
@@ -233,7 +233,7 @@ end
 
 for f in [
 	:Fill, :Integral, :GetEntries, :Print, :Write,
-	:GetNbinsX, :GetBinContent, :GetBinError, :GetBinLowEdge
+	:GetNbinsX, :GetBinContent, :GetBinError, :GetBinLowEdge, :GetBinWidth
 	]
 	@eval @parent_func $f TH1D TH1
 end
diff --git a/src/wrap_root.jl b/src/wrap_root.jl
index cbc6893..02acaea 100644
--- a/src/wrap_root.jl
+++ b/src/wrap_root.jl
@@ -63,7 +63,12 @@ wrap_root_file("TTree.h", "TTree", "gen/ttree", [:TTree, :Fill, :Branch, :GetEnt
 wrap_root_file("TBranch.h", "TBranch", "gen/tbranch", [:TBranch, :Write])
 
 wrap_root_file("TH1D.h", "TH1D", "gen/th1d", [:TH1D])
-wrap_root_file("TH1.h", "TH1", "gen/th1", [:TH1, :Fill, :Write, :Integral, :GetEntries, :GetBinContent, :GetBinError, :GetNbinsX, :GetBinLowEdge])
+wrap_root_file(
+		"TH1.h", "TH1", "gen/th1",
+		[:TH1, :Fill, :Write,
+		:Integral,
+		:GetEntries, :GetBinContent, :GetBinError, :GetNbinsX, :GetBinLowEdge, :GetBinWidth]
+	)
 
 wrap_root_file("TCollection.h", "TCollection", "gen/tcollection", [:TCollection, :GetEntries])
 wrap_root_file("TList.h", "TList", "gen/tlist", [:TList, :At], [:TList2])	
-- 
1.8.3.4 (Apple Git-47)

